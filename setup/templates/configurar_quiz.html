<script>
    const linguagemSelect = document.getElementById('linguagem-select');
    const assuntoSelect = document.getElementById('assunto-select');
    const quizForm = document.getElementById('quiz-config-form'); // Não se esqueça do id no <form>

    linguagemSelect.addEventListener('change', function() {
        // ... (código do fetch para carregar os assuntos) ...
        // A única mudança é dentro do .then()
        
        fetch(`/api/assuntos/${this.value}/`)
            .then(response => response.json())
            .then(data => {
                assuntoSelect.innerHTML = '<option value="">-- Escolha o Assunto --</option>';
                data.forEach(assunto => {
                    // O VALOR da opção agora é a PRÓPRIA URL!
                    assuntoSelect.innerHTML += `<option value="${assunto.url}">${assunto.nome}</option>`;
                });
                assuntoSelect.disabled = false;
            });
    });

    quizForm.addEventListener('submit', function(event) {
        event.preventDefault(); 
        
        // Pega a URL diretamente do <select> de assuntos
        const redirectUrl = assuntoSelect.value;

        if (redirectUrl) {
            // Redireciona o usuário
            window.location.href = redirectUrl;
        } else {
            alert('Por favor, selecione um assunto.');
        }
    });
</script>
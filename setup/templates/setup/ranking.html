{% extends "base.html" %}
{% load static %}

{% block title %}Ranking: {{ assunto.nome }}{% endblock %}

{% block content %}
<div class="container" style="margin-top: 40px; margin-bottom: 40px;">
    
    <h1 class="display-5">Ranking: {{ assunto.nome }} ({{ dificuldade.nome }})</h1>
    <h4 class="text-muted" style="font-weight: 400;">{{ assunto.linguagem.nome }}</h4>
    <hr>
    
    <table class="table table-striped table-hover mt-4">
        <thead class="thead-dark">
            <tr>
                <th scope="col">#</th>
                <th scope="col">Usu√°rio</th>
                <th scope="col">Acertos</th>
                <th scope="col">Tempo Gasto</th>
                <th scope="col">Data</th>
            </tr>
        </thead>
        <tbody>
            {% for resultado in resultados %}
                <tr {% if resultado.usuario == request.user %}class="table-info"{% endif %}>
                    <th scope="row">{{ forloop.counter }}</th>
                    <td>{{ resultado.usuario.username }}</td>
                    <td>{{ resultado.acertos }} / {{ resultado.total_perguntas }}</td>
                    <td>{{ resultado.tempo_gasto|slice:":8"|default:"N/A" }}</td>
                    <td>{{ resultado.data|date:"d/m/Y H:i" }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="5" class="text-center">Nenhum resultado registrado para este quiz ainda.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <a href="{% url 'configurar_quiz' %}" class="btn btn-secondary mt-3">Voltar</a>
</div>
{% endblock %}